@{
    ViewData["Title"] = "My Cart";
}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="https://kit.fontawesome.com/41c8b474e2.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="css/site.css">
    <title>My Cart</title>
</head>

<body>
    <div class="cart-container">
        <div class="header">
            <button class="back-btn">←</button>
            <h1>My Cart</h1>
            <div class="cart-icon">
                <i class="fa-thin fa-bag-shopping"></i>
                <span class="cart-count">3</span>
            </div>
        </div>

        <div class="cart-items">
            <div class="cart-item">
                <img src="/Images/81ZiuQmQUrL._AC_SL1500_.jpg" alt="Product Image">
                <div class="item-details">
                    <h2>Roller Rabbit</h2>
                    <p>Vado Odelle Dress</p>
                    <p class="price" data-price="198.00">$198.00</p>
                </div>
                <div class="quantity-control">
                    <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
                    <span class="quantity">1</span>
                    <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>

            <div class="cart-item">
                <img src="/Images/sneakers-axel-arigato-genesis-stripe-bee-bird-f0086011-white.jpg" alt="Product Image">
                <div class="item-details">
                    <h2>Axel Arigato</h2>
                    <p>Clean 90 Triple Sneakers</p>
                    <p class="price" data-price="245.00">$245.00</p>
                </div>
                <div class="quantity-control">
                    <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
                    <span class="quantity">1</span>
                    <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>

            <div class="cart-item">
                <img src="/Images/11405-06246-OS_01.jpg" alt="Product Image">
                <div class="item-details">
                    <h2>Herschel Supply Co.</h2>
                    <p>Daypack Backpack</p>
                    <p class="price" data-price="40.00">$40.00</p>
                </div>
                <div class="quantity-control">
                    <button class="quantity-btn" onclick="updateQuantity(this, -1)">-</button>
                    <span class="quantity">1</span>
                    <button class="quantity-btn" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>
        </div>

        <div class="cart-summary">
            <p>Total: (<span class="item-count">3</span> items) <span class="total-price">$500.00</span></p>
            <button class="checkout-btn">Proceed to Checkout</button>
        </div>


    </div>







    <script>
            function updateQuantity(button, change) {
            const quantitySpan = button.parentElement.querySelector(".quantity");
            let quantity = parseInt(quantitySpan.textContent);

            // Update quantity, ensuring it stays above 0
            quantity = Math.max(1, quantity + change);
            quantitySpan.textContent = quantity;

            // Update item price
            const priceElement = button.closest(".cart-item").querySelector(".price");
            const basePrice = parseFloat(priceElement.getAttribute("data-price"));
            const newPrice = (basePrice * quantity).toFixed(2);
            priceElement.textContent = `$${newPrice}`;

            // Update total price and item count
            updateTotalPrice();
            updateCartCount();
        }

        function updateTotalPrice() {
            let total = 0;
            const cartItems = document.querySelectorAll(".cart-item");

            cartItems.forEach(item => {
                const priceText = item.querySelector(".price").textContent.replace('$', '');
                total += parseFloat(priceText);
            });

            document.querySelector(".total-price").textContent = `$${total.toFixed(2)}`;
        }

        function updateCartCount() {
            let totalQuantity = 0;
            const quantities = document.querySelectorAll(".quantity");

            quantities.forEach(quantity => {
                totalQuantity += parseInt(quantity.textContent);
            });

            // Update the total item count
            document.querySelector(".item-count").textContent = totalQuantity;

            // Update cart icon count if needed
            document.querySelector(".cart-count").textContent = totalQuantity;
        }

    </script>
</body>

